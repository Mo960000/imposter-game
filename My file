<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لعبة الإمبوستر بالكلمات</title>
    <style>
        body { font-family: system-ui, sans-serif; background:#f5f5f5; padding:20px; }
        .container { max-width:500px;margin:auto;background:#fff;padding:20px;border-radius:12px; }
        button { padding:10px 16px;border:none;border-radius:8px;margin:5px; }
        .primary { background:#007bff;color:#fff; }
        .secondary { background:#eee; }
        .hidden { display:none; }
        .word { font-size:28px;font-weight:bold; }
    </style>
</head>
<body>
<div class="container">

    <div id="setupView">
        <h1>لعبة الإمبوستر</h1>
        <p>أضف أسماء اللاعبين ثم ابدأ الجولة</p>
        <input id="playerNameInput" placeholder="اسم اللاعب" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;">
        <button class="primary" id="addPlayerBtn">إضافة لاعب</button>
        <ul id="playersList"></ul>
        <button class="primary" id="startGameBtn" disabled>بدء الجولة</button>
    </div>

    <div id="revealView" class="hidden">
        <h2 id="currentPlayerTitle"></h2>
        <div id="tapToShowSection">
            <button class="primary" id="showWordBtn">اضغط لعرض الكلمة</button>
        </div>
        <div id="wordSection" class="hidden">
            <p>كلمتك:</p>
            <div class="word" id="displayedWord"></div>
            <button class="secondary" id="hideWordBtn">إخفاء</button>
        </div>
        <div id="roundEndSection" class="hidden">
            <h3>انتهت الجولة!</h3>
            <button class="primary" id="nextRoundBtn">جولة جديدة</button>
            <button class="secondary" id="newGameBtn">لعبة جديدة</button>
        </div>
    </div>

</div>

<script>
const WORD_BANK = ["جوال","سيارة","قهوة","مطار","بحر","جبل","فندق","مدرسة","مستشفى","كمبيوتر"];

let players = [];
let currentPlayerIndex = 0;
let impostorIndex = null;
let secretWord = "";

function $(id){return document.getElementById(id)}

$("addPlayerBtn").onclick = () => {
    let name = $("playerNameInput").value.trim();
    if(!name) return;
    players.push(name);
    $("playerNameInput").value = "";
    renderPlayers();
}

function renderPlayers(){
    $("playersList").innerHTML = players.map(p=>`<li>${p}</li>`).join("");
    $("startGameBtn").disabled = players.length < 3;
}

$("startGameBtn").onclick = () => startNewRound();

function startNewRound(){
    secretWord = WORD_BANK[Math.floor(Math.random()*WORD_BANK.length)];
    impostorIndex = Math.floor(Math.random()*players.length);
    currentPlayerIndex = 0;

    $("setupView").classList.add("hidden");
    $("revealView").classList.remove("hidden");

    $("tapToShowSection").classList.remove("hidden");
    $("wordSection").classList.add("hidden");
    $("roundEndSection").classList.add("hidden");
    updateTitle();
}

function updateTitle(){
    $("currentPlayerTitle").textContent = "دور: " + players[currentPlayerIndex];
}

$("showWordBtn").onclick = () => {
    $("displayedWord").textContent = currentPlayerIndex === impostorIndex ? "امبوستر" : secretWord;
    $("tapToShowSection").classList.add("hidden");
    $("wordSection").classList.remove("hidden");
}

$("hideWordBtn").onclick = () => {
    currentPlayerIndex++;
    if(currentPlayerIndex >= players.length){
        $("wordSection").classList.add("hidden");
        $("roundEndSection").classList.remove("hidden");
    } else {
        updateTitle();
        $("tapToShowSection").classList.remove("hidden");
        $("wordSection").classList.add("hidden");
    }
}

$("nextRoundBtn").onclick = startNewRound;
$("newGameBtn").onclick = () => location.reload();
</script>

</body>
</html>
